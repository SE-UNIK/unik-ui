<div class="mt-5">
  <h2 class="mb-4">Upload Files</h2>
  <div class="mb-3">
    <input type="file" (change)="onFileSelected($event)" class="form-control">
  </div>

  <!-- Modal -->
  <div *ngIf="showModal" class="modal" tabindex="-1" style="display: block; background: rgba(0, 0, 0, 0.5);">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">File Information</h5>
          <button type="button" class="btn-close" (click)="closeModal()"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="fileTitle" class="form-label">Title</label>
            <input type="text" id="fileTitle" [(ngModel)]="fileTitle" class="form-control">
          </div>
          <div class="mb-3">
            <label for="fileAuthors" class="form-label">Authors</label>
            <div class="input-group">
              <input type="text" #authorInput id="fileAuthors" class="form-control">
              <button type="button" class="btn btn-outline-secondary" (click)="addAuthor(authorInput.value); authorInput.value=''">Add Author</button>
            </div>
            <div *ngIf="fileAuthors.length > 0" class="mt-2">
              <span class="badge bg-primary me-1" *ngFor="let author of fileAuthors">
                {{ author }} <button type="button" class="btn-close btn-close-white" aria-label="Close" (click)="removeAuthor(author)"></button>
              </span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeModal()">Cancel</button>
          <button type="button" class="btn btn-primary" (click)="uploadFile()">Upload</button>
        </div>
      </div>
    </div>
  </div>

  <h3 class="mt-4">All Files in Metadata</h3>
  <ul class="list-group mb-4">
    <li *ngFor="let file of metadataFiles" (click)="selectFile(file)" [class.selected]="isSelected(file)" class="list-group-item list-group-item-action">
      {{ file.title }}
    </li>
  </ul>

  <button (click)="uploadSelectedFilesToHDFS()" class="btn btn-success mb-4">Upload Selected Files to HDFS</button>

  <h3>Selected Files</h3>
  <ul class="list-group mb-4">
    <li *ngFor="let file of selectedFiles" class="list-group-item">
      {{ file.title }}
    </li>
  </ul>

  <div class="d-flex justify-content-between">
    <button (click)="navigateTo('view-files')" class="btn btn-outline-primary">View HDFS Files</button>
    <button (click)="navigateTo('select-analysis')" class="btn btn-outline-success">Analyze Files</button>
  </div>

  <button (click)="navigateTo('')" class="btn btn-secondary mt-3">Back to Home</button>
</div>

